{% extends "layout.html" %}
{% block title %}ì§ì› ëª©ë¡{% endblock %}

{% block content %}
<h1>ğŸ‘¥ ê³„ì • ê´€ë¦¬</h1>

{% if is_admin %}
<div style="margin-bottom:15px;">
    <a href="{{ url_for('main.add_user') }}">â• ì§ì› ì¶”ê°€</a>
</div>
{% endif %}

<table border="1" cellpadding="5">
<tr>
    <th>ì´ë¦„</th>
    <th>ì´ë©”ì¼</th>
    <th>ì‹ ì²­ ê°€ëŠ¥ ì—°ì°¨</th>
    <th>ë‚¨ì€ ì—°ì°¨</th>
    <th>ì´ ì—°ì°¨</th>
    <th>ì‚¬ìš© ì—°ì°¨</th>

    {% if is_admin %}
        <th>ì—°ì°¨ ì…ë ¥</th>
        <th>ì§ì› ì‚­ì œ</th>
    {% endif %}
</tr>

{% for user in users %}
<tr>
    <td>{{ user.name }}</td>
    <td>{{ user.email }}</td>

    <!-- ì‹ ì²­ ê°€ëŠ¥ ì—°ì°¨ -->
    <td>
    {% for year, days in user.requestable_leave_by_year.items() %}
        {{ year }}ë…„: {{ days }}ì¼ ì‹ ì²­ ê°€ëŠ¥<br>
    {% else %}
        ì—†ìŒ
    {% endfor %}
    </td>

    <!-- ë‚¨ì€ ì—°ì°¨ -->
    <td>
    {% for year, remaining in user.remaining_leave_by_year.items() %}
        {{ year }}ë…„: {{ remaining }}ì¼<br>
    {% else %}
        ì—†ìŒ
    {% endfor %}
    </td>

    <!-- ì´ ì—°ì°¨ -->
    <td>
    {% for year, total in user.total_leave_by_year.items() %}
        {{ year }}ë…„: {{ total }}ì¼<br>
    {% else %}
        ì—†ìŒ
    {% endfor %}
    </td>

    <!-- ì‚¬ìš© ì—°ì°¨ -->
    <td>
    {% for year, used in user.used_leave_by_year.items() %}
        {{ year }}ë…„: {{ used }}ì¼<br>
    {% else %}
        ì—†ìŒ
    {% endfor %}
    </td>

    {% if is_admin %}
    <td>
        <a href="{{ url_for('main.add_leave_balance', user_id=user.id) }}">ğŸ“ ì´ ì—°ì°¨ ì…ë ¥</a><br>
    </td>

    <td>
        <form method="POST" action="{{ url_for('main.delete_user', user_id=user.id) }}">
            <button onclick="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ğŸ—‘ï¸ ì§ì› ì‚­ì œ</button>
        </form>
    </td>
    {% endif %}
</tr>
{% endfor %}
</table>

{% endblock %}
